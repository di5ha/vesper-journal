version: "2"
type: frontend
tech_stack:
  - javascript
  - react
  - tailwindcss
  - vite
  - supabase
  - recharts
  - react-router-dom
routes:
  - path: /auth
    file: src/pages/Auth.jsx
    auth_required: false
    description: Login and signup page with email/password authentication via Supabase
  - path: /dashboard
    file: src/pages/Dashboard.jsx
    auth_required: true
    description: Main three-column writing shell with sidebar, journal editor, and insight panel
  - path: /drift
    file: src/pages/DriftTimeline.jsx
    auth_required: true
    description: Mood-score drift timeline with theme filtering and charts
  - path: /reports
    file: src/pages/Reports.jsx
    auth_required: true
    description: Weekly AI-generated reports with PDF download
features:
  - name: User Authentication
    description: Sign up and login with email and password using Supabase Auth
    files:
      - src/pages/Auth.jsx
      - src/hooks/useAuth.jsx
      - src/lib/supabase.js
      - src/components/ProtectedRoute.jsx
    entry_route: /auth
    user_interactions:
      - Fill email input field
      - Fill password input field
      - Click Sign in button to login
      - Click Sign up link to switch to signup mode
      - Click Create account button to register
      - See error message on invalid credentials
      - See info message to check email after signup
    api_calls: []
    auth_required: false
  - name: Journal Entry Management
    description: Create, edit, auto-save, and delete journal entries in a rich editor
    files:
      - src/pages/Dashboard.jsx
      - src/components/JournalEditor.jsx
      - src/components/Sidebar.jsx
      - src/hooks/useAutoSave.js
      - src/lib/api.js
    entry_route: /dashboard
    user_interactions:
      - Click New Entry button in sidebar to start writing
      - Type content in the journal editor textarea
      - Entry auto-saves after typing stops
      - Click an existing entry in the sidebar to load it
      - Delete an entry from the sidebar
      - Search entries via semantic search in sidebar
    api_calls:
      - method: POST
        endpoint: /entries
      - method: PUT
        endpoint: /entries/{id}
      - method: GET
        endpoint: /entries
      - method: GET
        endpoint: /entries/{id}
      - method: DELETE
        endpoint: /entries/{id}
      - method: POST
        endpoint: /entries/search
    auth_required: true
  - name: AI Analysis Insight Panel
    description: View AI-generated analysis (mood, themes, sentiment) for the active journal entry
    files:
      - src/components/InsightPanel.jsx
      - src/hooks/useAnalysis.js
      - src/lib/api.js
    entry_route: /dashboard
    user_interactions:
      - Select a journal entry to view its AI analysis
      - See mood score, themes, and sentiment displayed in insight panel
      - See loading state while analysis is being generated
    api_calls:
      - method: GET
        endpoint: /entries/{id}/analysis
    auth_required: true
  - name: Drift Timeline
    description: Visualize mood-score trends over time with theme filtering using Recharts
    files:
      - src/pages/DriftTimeline.jsx
      - src/lib/api.js
    entry_route: /drift
    user_interactions:
      - View mood timeline chart
      - Filter timeline by theme
      - See all available themes
    api_calls:
      - method: GET
        endpoint: /drift/themes
      - method: GET
        endpoint: /drift/timeline
    auth_required: true
  - name: Weekly Reports
    description: Generate and view AI-synthesized weekly reports with PDF download
    files:
      - src/pages/Reports.jsx
      - src/components/ReportCard.jsx
      - src/lib/api.js
    entry_route: /reports
    user_interactions:
      - Click Generate Report button to create a new weekly report
      - View list of past reports
      - Click a report card to view details
      - Click Download PDF button to save report as PDF
    api_calls:
      - method: POST
        endpoint: /reports/generate
      - method: GET
        endpoint: /reports
      - method: GET
        endpoint: /reports/{id}
      - method: GET
        endpoint: /reports/{id}/pdf
    auth_required: true
  - name: Navigation
    description: Sidebar navigation between Dashboard, Drift Timeline, and Reports pages
    files:
      - src/components/Sidebar.jsx
      - src/App.jsx
    entry_route: /dashboard
    user_interactions:
      - Click Dashboard nav link
      - Click Drift nav link
      - Click Reports nav link
      - Click Sign out button
    api_calls: []
    auth_required: true
known_limitations:
  - issue: All protected routes require Supabase authentication â€” no test/demo mode available
    location: src/components/ProtectedRoute.jsx
    impact: Testing requires valid Supabase credentials
  - issue: Auto-save has no offline/conflict resolution
    location: src/hooks/useAutoSave.js
    impact: Simultaneous edits in multiple tabs could cause data loss
