services:
  - type: web
    name: vesper-api
    runtime: python
    region: oregon
    plan: free
    rootDir: backend

    buildCommand: pip install -r requirements.txt

    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT

    healthCheckPath: /health

    envVars:
      # ── Supabase ───────────────────────────────────────────────────────────
      - key: SUPABASE_URL
        sync: false          # paste in Render dashboard
      - key: SUPABASE_KEY
        sync: false
      - key: SUPABASE_SERVICE_KEY
        sync: false

      # ── LiteLLM proxy (OpenAI-compatible) ──────────────────────────────────
      - key: LITELLM_API_KEY
        sync: false
      - key: LITELLM_BASE_URL
        sync: false
      - key: LITELLM_MODEL
        value: openai5nano    # gpt-5-nano alias registered in LiteLLM

      # ── CORS: comma-separated list of allowed frontend origins ──────────────
      - key: FRONTEND_URL
        sync: false          # e.g. https://vesper.vercel.app

      # ── App ────────────────────────────────────────────────────────────────
      - key: APP_ENV
        value: production
